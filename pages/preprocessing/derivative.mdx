import Image from 'next/image'
import ImageLink from '/components/ImageLink';
export const imagePath = "/images/preprocessing/";

## Derivatives
<hr />
<br />
<Image src={`${imagePath}derivative_icon.svg`} alt="derivative icon" width={65} height={65} />

In spectral analysis, derivatives are often used as a preprocessing technique to enhance specific features of the spectra or to remove baseline effects. The derivative operation is typically performed using the Savitzky-Golay filter, which allows for smoothing and differentiation in a single step. The order of the derivative can be selected based on the desired level of enhancement or suppression of spectral features.

### Savitzky-Golay derivative

DOI: https://doi.org/10.1021/ac60214a047

The derivative operation is typically performed using the Savitzky-Golay filter, which allows for smoothing and differentiation in a single step. Higher-order derivatives can further enhance or suppress spectral features, but they are generally more sensitive to noise.

- **First Derivative**: Highlights the rate of change in the intensity values with respect to the independent variable (e.g., wavelength or energy). It can be useful for resolving overlapping peaks, removing baseline offsets, and enhancing spectral features.
- **Second Derivative**:Highlights the rate of change of the first derivative, or the curvature of the spectrum. It can be useful for resolving overlapping peaks, removing linear baselines, and enhancing spectral features.
- **Third and Fourth derivatives**: These higher-order derivatives can be useful for further enhancing spectral features or removing more complex baseline effects. However, they are generally more sensitive to noise and may require additional smoothing or preprocessing steps.

Let X be a spectrum with n data points x1, x2, ..., xn, and x be the independent variable (e.g., wavelength or energy). The derivatives of X with respect to x are calculated as:
```
First Derivative: dX/dx = lim(Δx→0) (X(x + Δx) - X(x)) / Δx
Second Derivative: d^2X/dx^2 = d/dx (dX/dx)
Third Derivative: d^3X/dx^3 = d/dx (d^2X/dx^2)
Fourth Derivative: d^4X/dx^4 = d/dx (d^3X/dx^3)
```
These derivatives are approximated using the Savitzky-Golay filter, which performs a local polynomial regression on a sliding window of data points.

>Imagine you have a spectrum with two overlapping peaks and a linear baseline. Taking the first derivative of the spectrum can help resolve the overlapping peaks by highlighting the points of maximum slope, which correspond to the peak positions. Additionally, any constant baseline offsets will be removed, as the derivative of a constant is zero. If you further take the second derivative, it can help remove the linear baseline, as the second derivative of a linear function is zero. The second derivative will also highlight the points of maximum curvature, which correspond to the peak positions.
>

<br />
<hr />
<br />
<ImageLink href="/preprocessing/standardization" image={{alt: "standardization icon", src: `${imagePath}standardization_icon.svg`}} text="Standardize" />
<br />
<ImageLink href="/preprocessing/baseline_correction" image={{alt: "baseline correction icon",src: `${imagePath}baseline_icon.svg`}} text="Baseline" />
<br />
<ImageLink href="/preprocessing/smoothing" image={{alt: "smoothing icon", src: `${imagePath}smoothing_icon.svg`}} text="Smooth" />
<br />
<ImageLink href="/preprocessing/offset" image={{alt: "offset icon", src: `${imagePath}offset_icon.svg`}} text="Offset" />
<br />
<ImageLink href="/preprocessing/normalization" image={{alt: "normalization icon", src: `${imagePath}normalization_icon.svg`}} text="Normalize" />
<br />
<ImageLink href="/preprocessing/peak_detection" image={{alt: "peak detection icon", src: `${imagePath}peak_detection_icon.svg`}} text="Peaks" />